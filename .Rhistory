planilha_controle  <- read.xlsx("../Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
planilha_controle  <- read.xlsx("/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(readxl)) install.packages("readxl")
if (!require(xlsx)) install.packages("xlsx")
if (!require(tidyr)) install.packages("tidyr")
library(tidyverse)
library(readxl)
library(xlsx)
library(tidyr)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
View(planilha_controle)
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(readxl)) install.packages("readxl")
if (!require(xlsx)) install.packages("xlsx")
if (!require(tidyr)) install.packages("tidyr")
library(tidyverse)
library(readxl)
library(xlsx)
library(tidyr)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
View(planilha_controle)
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(readxl)) install.packages("readxl")
if (!require(tidyr)) install.packages("tidyr")
if (!require(openxlsx)) install.packages("openxlsx")
library(tidyverse)
library(readxl)
library(tidyr)
library(openxlsx)
# LAYOUT:  http://200.152.38.155/CNPJ/LAYOUT_DADOS_ABERTOS_CNPJ.pdf
dados_Layout  <- read_excel("dados/LAYOUT_DADOS_ABERTOS_CNPJ.xlsx")
# ARQUIVO: "Dados Abertos CNPJ 01"
#baseCNPJ      <- read_lines("dados/K3241.K003200DV.D00422.L00001.txt")
baseCNPJ       <- read_lines("dados/dadosCNPJ01Amostra100.txt")  #Amostra com 100 linhas.
# x = 0 -> HEADER
# x = 1 -> LAYOUT PRINCIPAL
# x = 2 -> LAYOUT SOCIOS
# X = 3 -> CNAEs SECUNDÁRIAS
# x = 4 -> TRAILLER
x <- 1
tipo_atual  <- dados_Layout %>%
distinct(TIPO_REGISTRO, ID_TIPO_REGISTRO) %>%
filter(ID_TIPO_REGISTRO == x)
dados_Layout_por_tipo <- dados_Layout %>%
filter(TIPO_REGISTRO == as.character(tipo_atual$TIPO_REGISTRO),POSICAO_R!="NA")   %>%
mutate(NOME_REGISTRO=str_replace_all(NOME_REGISTRO," |/|-","_"))
df_baseCNPJ <- baseCNPJ[str_detect(baseCNPJ,"^1")] %>%
map(~str_sub(.x,
start=t(dados_Layout_por_tipo$COLUNA)[1:(length(t(dados_Layout_por_tipo$COLUNA)))],
end=(t(dados_Layout_por_tipo$POSICAO_R))))%>%
transpose %>%
map(as.character) %>%
set_names(
t(dados_Layout_por_tipo$NOME_REGISTRO)
) %>%
as_tibble # %>%
# filter(CODIGO_NATUREZA_JURIDICA=="3069", UF=="RJ") # Descomentar quando estiver utilizando o arquivo completo
x <- apply(df_baseCNPJ[,c(9,15)],2,function(x)data.frame(as.Date(as.character(x), "%Y%m%d")))
x <- data.frame(x)
names(x) <- c("DATA_SITUACAO_CADASTRAL" ,"DATA_INICIO_ATIVIDADE")
df_baseCNPJ[,c(9,15)] <- x
df_baseCNPJ %>%
write_csv("saídas/df_DadosPorTipo_full.csv")
library(tidyverse)
library(readxl)
library(tidyr)
library(openxlsx)
library(beepr)
#install.packages("beepr")
#DEFs
numArquivo = "20"
strDadosINI <- str_c("c:/Programas/DADOS_ABERTOS_CNPJ.FUND_",numArquivo,"_INI.csv")
strDadosCNPJ <- str_c("c:/Programas/DADOS_ABERTOS_CNPJ_",numArquivo,".zip")
strDadosOUT <- str_c("c:/Programas/DADOS_ABERTOS_CNPJ.FUND_",numArquivo,".csv")
# LAYOUT:  http://200.152.38.155/CNPJ/LAYOUT_DADOS_ABERTOS_CNPJ.pdf
dados_Layout  <- read_excel("dados/LAYOUT_DADOS_ABERTOS_CNPJ.xlsx")
dados_Layout %>% head(1) %>%
write.csv2(strDadosINI)
# ARQUIVO: "Dados Abertos CNPJ 01"
#baseCNPJ      <- read_lines("dados/K3241.K003200DV.D00422.L00001.txt")
#baseCNPJ       <- read_lines("dados/dadosCNPJ01Amostra.zip")  #Amostra com 100 linhas.
baseCNPJ       <- read_lines(strDadosCNPJ)  #FULL.
install.packages(c("devtools", "DT", "flexdashboard"))
# Chunk 1
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(readxl)) install.packages("readxl")
if (!require(xlsx)) install.packages("xlsx")
if (!require(tidyr)) install.packages("tidyr")
if (!require(flexdashboard)) install.packages("flexdashboard")
if (!require(devtools)) install.packages("devtools")
library(devtools)
library(tidyverse)
library(readxl)
library(xlsx)
library(tidyr)
library(flexdashboard)
library(fs)
library(DT)
# Chunk 2
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
# Chunk 3
#Itens necessários:
#1- Quantidade de itens do total por quantidade de itens por promotoria
#2- Quantidade de datas de saída sem que tenha um responsável
#3- Total de lançamentos e total de procedimentos únicos (total de números MPRJ)
#4- Tempo total do procedimento que tiverem registro na  coluna S
View(planilha_controle)
View(planilha_controle)
library(tidyverse)
library(flexdashboard)
knitr::opts_chunk$set(cache=F)
df_crimes <- read_csv2("data/crimes_2010_2020.zip")
ano_min <- df_crimes$ano %>% min
ano_max <- df_crimes$ano %>% max
# coluna contagem contém alguns NAs, entao a soma tem q desconsiderá-los
# indicador no valuebox da esquerda
crimes_total <- df_crimes$contagem %>%
sum(na.rm=T)
# indicador no valuebox do meio
crimes_ano_max <- df_crimes %>%
filter(ano==ano_max) %>%
pull(contagem) %>%
sum(na.rm=T)
# indicador no valuebox da direita
roubos_total <- df_crimes %>%
filter(grupo=="Roubos") %>%
pull(contagem) %>%
sum(na.rm=T)
# indicador no valuebox da direita
furtos_total <- df_crimes %>%
filter(grupo=="Furtos") %>%
pull(contagem) %>%
sum(na.rm=T)
valueBox(str_c(round(crimes_total/10^6,2), "M"), icon = "fa-bomb")
valueBox(round(crimes_ano_max/10^3,1), icon = "fa-exclamation-circle",
color="purple")
valueBox(str_c(round(roubos_total/10^6,2),"M"), icon = "fa-frown-o",
color="red")
df_crimes %>%
mutate(ano=as.character(ano)) %>%
group_by(ano) %>%
summarize(contagem=sum(contagem,na.rm=T)) %>%
ggplot(aes(x=ano, y=contagem, fill=ano)) +
geom_col() +
theme(legend.position = "none")
df_crimes %>%
mutate(mes=as.integer(mes),ano=as.character(ano)) %>%
group_by(ano,mes) %>%
summarize(contagem=sum(contagem)) %>%
ggplot(aes(x=mes, y=contagem, group=ano,color=ano)) +
geom_line(size=2.) +
scale_x_continuous(breaks=1:12,
labels=c("jan","fev","mar",
"abr","mai","jun",
"jul","ago","set",
"out","nov","dez")) +
theme_minimal()
valueBox(str_c(round(crimes_total/10^6,2), "M"), icon = "fa-bomb")
valueBox(round(crimes_ano_max/10^3,1), icon = "fa-exclamation-circle",
color="purple")
valueBox(str_c(round(roubos_total/10^6,2),"M"), icon = "fa-frown-o",
color="red")
# Adicionar um 4o valueBox na primeira fila com o numero de furtos (coluna grupo). Nota: escolher icone novo, mudar a cor do valueBox
valueBox(str_c(round(furtos_total/10^6,2),"M"), icon = "fa-shield",
color="#99ff33")
df_crimes %>%
mutate(ano=as.character(ano)) %>%
group_by(ano) %>%
summarize(contagem=sum(contagem,na.rm=T)) %>%
ggplot(aes(x=ano, y=contagem, fill=ano)) +
geom_col() +
theme(legend.position = "none")
df_crimes %>%
mutate(mes=as.integer(mes),ano=as.character(ano)) %>%
group_by(ano,mes) %>%
summarize(contagem=sum(contagem)) %>%
ggplot(aes(x=mes, y=contagem, group=ano,color=ano)) +
geom_line(size=2.) +
scale_x_continuous(breaks=1:12,
labels=c("jan","fev","mar",
"abr","mai","jun",
"jul","ago","set",
"out","nov","dez")) +
theme_minimal()
# Adicionar mais um grafico de barras a segunda fila, mostrando total de roubos por Regiao
df_crimes %>%
#mutate(ano=as.character(ano)) %>%
filter(grupo=="Roubos") %>%
group_by(Regiao) %>%
summarize(contagem=sum(contagem,na.rm=T)) %>%
ggplot(aes(x=Regiao, y=contagem, fill=Regiao)) +
geom_col() +
theme(legend.position = "none")
# Adicionar a 3a fileira, um grafico de barras com a contagem de cada grupo de crime no municipio do Rio de Janeiro. ou seja, eixo x: grupo de crime, eixo y: contagem de crimes.
df_crimes %>%
filter(munic=="Rio de Janeiro") %>%
#mutate(ano=as.character(ano)) %>%
group_by(grupo) %>%
summarize(contagemcrimes=sum(contagem,na.rm=T)) %>%
ggplot(aes(x=grupo, y=contagemcrimes, fill=grupo)) +
geom_col() +
theme(legend.position = "none")
# Adicionar a 3a fileira, um grafico mostrando a contagem dos grupos de crime por mes no ano de 2019 no municipo do rio de janeiro. ou seja, eixo x: mes, eixo y: contagem, cores das linhas: grupo de crime.
df_crimes %>%
mutate(mes=as.integer(mes),ano=as.character(ano)) %>%
filter(munic=="Rio de Janeiro", ano==2019) %>%
group_by(mes, grupo) %>%
summarize(contagem=sum(contagem)) %>%
ggplot(aes(x=mes, y=contagem, group=grupo,color=grupo)) +
geom_line(size=2.) +
scale_x_continuous(breaks=1:12,
labels=c("jan","fev","mar",
"abr","mai","jun",
"jul","ago","set",
"out","nov","dez")) +
theme_minimal()
View(df_crimes)
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
ano_max <- planilha_controle$Cadastrado.no.MPRJ %>% max
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
ano_max <- planilha_controle$Cadastrado.no.MPRJ %>% max
library(tidyverse)
library(flexdashboard)
knitr::opts_chunk$set(cache=F)
df_crimes <- read_csv2("data/crimes_2010_2020.zip")
ano_min <- df_crimes$ano %>% min
ano_max <- df_crimes$ano %>% max
# coluna contagem contém alguns NAs, entao a soma tem q desconsiderá-los
# indicador no valuebox da esquerda
crimes_total <- df_crimes$contagem %>%
sum(na.rm=T)
# indicador no valuebox do meio
crimes_ano_max <- df_crimes %>%
filter(ano==ano_max) %>%
pull(contagem) %>%
sum(na.rm=T)
# indicador no valuebox da direita
roubos_total <- df_crimes %>%
filter(grupo=="Roubos") %>%
pull(contagem) %>%
sum(na.rm=T)
valueBox(str_c(round(crimes_total/10^6,2), "M"), icon = "fa-bomb")
valueBox(round(crimes_ano_max/10^3,1), icon = "fa-exclamation-circle",
color="purple")
valueBox(str_c(round(roubos_total/10^6,2),"M"), icon = "fa-frown-o",
color="red")
df_crimes %>%
mutate(ano=as.character(ano)) %>%
group_by(ano) %>%
summarize(contagem=sum(contagem,na.rm=T)) %>%
ggplot(aes(x=ano, y=contagem, fill=ano)) +
geom_col() +
theme(legend.position = "none")
df_crimes %>%
mutate(mes=as.integer(mes),ano=as.character(ano)) %>%
group_by(ano,mes) %>%
summarize(contagem=sum(contagem)) %>%
ggplot(aes(x=mes, y=contagem, group=ano,color=ano)) +
geom_line(size=2.) +
scale_x_continuous(breaks=1:12,
labels=c("jan","fev","mar",
"abr","mai","jun",
"jul","ago","set",
"out","nov","dez")) +
theme_minimal()
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
ano_max <- max(planilha_controle$ano)
View(df_crimes)
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
planilha_controle %>%
group_by(Procedimento) %>%
summarise(Contagem = length(unique(Promotoria)))
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(readxl)) install.packages("readxl")
if (!require(xlsx)) install.packages("xlsx")
if (!require(tidyr)) install.packages("tidyr")
if (!require(flexdashboard)) install.packages("flexdashboard")
if (!require(dplyr)) install.packages("dplyr")
library(tidyverse)
library(readxl)
library(xlsx)
library(tidyr)
library(flexdashboard)
library(dplyr)
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
planilha_controle %>%
group_by(Procedimento) %>%
summarise(Contagem = length(unique(Promotoria)))
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
#contagem_total  <- planilha_controle %>%
#  group_by(Procedimento) %>%
#  summarise(Contagem = length(unique(Promotoria)))
contagem_total  <- nrow(planilha_controle %.% group_by(Procedimento))
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
#contagem_total  <- planilha_controle %>%
#  group_by(Procedimento) %>%
#  summarise(Contagem = length(unique(Promotoria)))
contagem_total  <- nrow(planilha_controle %>% group_by(Procedimento))
# Chunk 1: global
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(readxl)) install.packages("readxl")
if (!require(xlsx)) install.packages("xlsx")
if (!require(tidyr)) install.packages("tidyr")
if (!require(flexdashboard)) install.packages("flexdashboard")
if (!require(dplyr)) install.packages("dplyr")
library(tidyverse)
library(readxl)
library(xlsx)
library(tidyr)
library(flexdashboard)
library(dplyr)
# Chunk 2
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
#contagem_total  <- planilha_controle %>%
#  group_by(Procedimento) %>%
#  summarise(Contagem = length(unique(Promotoria)))
contagem_total  <- nrow(planilha_controle %>% group_by(Procedimento))
# Chunk 3
valueBox(str_c(contagem_total), "M"), icon = "fa-bomb")
# Chunk 4
#Itens necessários:
#1- Quantidade de itens do total por quantidade de itens por promotoria
#2- Quantidade de datas de saída sem que tenha um responsável
#3- Total de lançamentos e total de procedimentos únicos (total de números MPRJ)
#4- Tempo total do procedimento que tiverem registro na  coluna S
# Chunk 1: global
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(readxl)) install.packages("readxl")
if (!require(xlsx)) install.packages("xlsx")
if (!require(tidyr)) install.packages("tidyr")
if (!require(flexdashboard)) install.packages("flexdashboard")
if (!require(dplyr)) install.packages("dplyr")
library(tidyverse)
library(readxl)
library(xlsx)
library(tidyr)
library(flexdashboard)
library(dplyr)
# Chunk 2
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
#contagem_total  <- planilha_controle %>%
#  group_by(Procedimento) %>%
#  summarise(Contagem = length(unique(Promotoria)))
contagem_total  <- nrow(planilha_controle %>% group_by(Procedimento))
# Chunk 3
valueBox((contagem_total), icon = "fa-bomb")
# Chunk 4
#Itens necessários:
#1- Quantidade de itens do total por quantidade de itens por promotoria
#2- Quantidade de datas de saída sem que tenha um responsável
#3- Total de lançamentos e total de procedimentos únicos (total de números MPRJ)
#4- Tempo total do procedimento que tiverem registro na  coluna S
valueBox((contagem_total), icon = "fa-book", color="green")
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(readxl)) install.packages("readxl")
if (!require(xlsx)) install.packages("xlsx")
if (!require(tidyr)) install.packages("tidyr")
if (!require(flexdashboard)) install.packages("flexdashboard")
if (!require(dplyr)) install.packages("dplyr")
library(tidyverse)
library(readxl)
library(xlsx)
library(tidyr)
library(flexdashboard)
library(dplyr)
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
#contagem_total  <- planilha_controle %>%
#  group_by(Procedimento) %>%
#  summarise(Contagem = length(unique(Promotoria)))
contagem_total  <- nrow(planilha_controle %>% group_by(Procedimento))
View(planilha_controle)
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
#contagem_total  <- planilha_controle %>%
#  group_by(Procedimento) %>%
#  summarise(Contagem = length(unique(Promotoria)))
contagem_total  <- nrow(planilha_controle %>% group_by(Procedimento))
contagem_filtrada <- filter(contagem_total, Promotoria == "1ª PJF")
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
#contagem_total  <- planilha_controle %>%
#  group_by(Procedimento) %>%
#  summarise(Contagem = length(unique(Promotoria)))
contagem_total  <- nrow(planilha_controle %>% group_by(Procedimento) %>% filter(Promotoria, Promotoria == "1ª PJF"))
#contagem_filtrada <- contagem_total %>% filter(Promotoria > mean(mass, na.rm = TRUE))
# Chunk 1: global
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(readxl)) install.packages("readxl")
if (!require(xlsx)) install.packages("xlsx")
if (!require(tidyr)) install.packages("tidyr")
if (!require(flexdashboard)) install.packages("flexdashboard")
if (!require(dplyr)) install.packages("dplyr")
library(tidyverse)
library(readxl)
library(xlsx)
library(tidyr)
library(flexdashboard)
library(dplyr)
# Chunk 2
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
#contagem_total  <- planilha_controle %>%
#  group_by(Procedimento) %>%
#  summarise(Contagem = length(unique(Promotoria)))
contagem_total  <- nrow(planilha_controle %>% group_by(Procedimento) %>% filter(Promotoria, Promotoria == "1ª PJF"))
#contagem_filtrada <- contagem_total %>% filter(Promotoria > mean(mass, na.rm = TRUE))
# Chunk 3
valueBox((contagem_total), icon = "fa-book", color = "green")
# Chunk 4
planilha_controle %>%
mutate(Promotoria=as.character(Promotoria)) %>%
group_by(Promotoria) %>%
summarize(contagem_total) %>%
ggplot(aes(x=Promotorias, y= Quantidade, fill=Promotoria)) +
geom_col() +
theme(legend.position = "none")
# Chunk 5
#Itens necessários:
#1- Quantidade de itens do total por quantidade de itens por promotoria
#2- Quantidade de datas de saída sem que tenha um responsável
#3- Total de lançamentos e total de procedimentos únicos (total de números MPRJ)
#4- Tempo total do procedimento que tiverem registro na  coluna S
View(planilha_controle)
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
#contagem_total  <- planilha_controle %>%
#  group_by(Procedimento) %>%
#  summarise(Contagem = length(unique(Promotoria)))
contagem_total  <- nrow(planilha_controle %>% group_by(Procedimento))
primeira <- planilha_controle %>%  filter(Promotoria  == "1ª PJF")
#contagem_filtrada <- nrow(planilha_controle %>% group_by(Procedimento) %>% filter(Promotoria, Promotoria == "1ª PJF"))
View(primeira)
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
#contagem_total  <- planilha_controle %>%
#  group_by(Procedimento) %>%
#  summarise(Contagem = length(unique(Promotoria)))
contagem_total  <- nrow(planilha_controle %>% group_by(Procedimento))
#primeira <- planilha_controle %>%  filter(Promotoria  == "1ª PJF")
Promotoria <- table(planilha_controle$Promotoria)
df_Prom <- data.frame(Promotoria)
df_Prom <- rename(df_Prom, Promotoria = Var1, Total = Freq)
df_Prom
View(df_Prom)
View(df_Prom)
# Chunk 1: global
if (!require(tidyverse)) install.packages("tidyverse")
if (!require(readxl)) install.packages("readxl")
if (!require(xlsx)) install.packages("xlsx")
if (!require(tidyr)) install.packages("tidyr")
if (!require(flexdashboard)) install.packages("flexdashboard")
if (!require(dplyr)) install.packages("dplyr")
library(tidyverse)
library(readxl)
library(xlsx)
library(tidyr)
library(flexdashboard)
library(dplyr)
# Chunk 2
knitr::opts_chunk$set(cache=F)
planilha_controle  <- read.xlsx("C:/Users/Lucas/Desktop/MPRJ/Atual - 2020 NOVO - EM 07-07-2020.xlsx", encoding="UTF-8", sheetName = "Assessoria")
#contagem total de procedimentos
#contagem_total  <- planilha_controle %>%
#  group_by(Procedimento) %>%
#  summarise(Contagem = length(unique(Promotoria)))
contagem_total  <- nrow(planilha_controle %>% group_by(Procedimento))
#primeira <- planilha_controle %>%  filter(Promotoria  == "1ª PJF")
Promotoria <- table(planilha_controle$Promotoria)
df_Prom <- data.frame(Promotoria)
df_Prom <- rename(df_Prom, Promotoria = Var1, Total = Freq)
# Chunk 3
valueBox((contagem_total), icon = "fa-book", color = "green")
# Chunk 4
df_Prom %>%
group_by(Promotoria) %>%
ggplot(aes(x=Promotoria, y= Total, fill=Promotoria)) +
geom_col() +
theme(legend.position = "none")
# Chunk 5
#Itens necessários:
#1- Quantidade de itens do total por quantidade de itens por promotoria
#2- Quantidade de datas de saída sem que tenha um responsável
#3- Total de lançamentos e total de procedimentos únicos (total de números MPRJ)
#4- Tempo total do procedimento que tiverem registro na  coluna S
View(df_Prom)
View(df_Prom)
View(planilha_controle)
